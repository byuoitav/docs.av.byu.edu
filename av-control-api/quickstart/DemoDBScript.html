<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Demo DB Files :: BYU OIT AV // Docs</title>
    <link rel="canonical" href="https://docs.av.byu.edu/av-control-api/quickstart/DemoDBScript.html">
    <meta name="generator" content="Antora 2.1.2">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="stylesheet" href="../../_/css/site-extra.css">
<link rel="stylesheet" href="../../_/css/vendor/docsearch.min.css">
<!-- fetched from https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css -->
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <a href="https://it.byu.edu">BYU OIT AV</a>
        <span class="separator">//</span>
        <a href="https://docs.av.byu.edu">Docs</a>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Projects</div>
          <div class="navbar-dropdown">
            <div class="navbar-item"><strong>AV Control API</strong></div>
            <a class="navbar-item" href="https://github.com/byuoitav/av-control-api">Repository</a>
            <a class="navbar-item" href="https://github.com/byuoitav/av-control-api/issues">Issue Tracker</a>
            <hr class="navbar-divider">
            <a class="navbar-item" href="https://gitlab.com/antora/antora/blob/master/contributing.adoc">Contributing</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Tools</div>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://smee.avs.byu.edu">BYU Monitoring</a>
          </div>
        </div>
        <a class="navbar-item" href="https://github.com/byuoitav">
          <span class="icon">
            <svg aria-hidden="true" data-icon="github" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
              <path fill="#57aaee" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path>
            </svg>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="av-control-api" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">AV Control API</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="quickstart.html">Quick Start</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="hardwareSetup.html">Hardware Set Up</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="OS.html">Setting Up the Operating System</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="startAPI.html">Deploying Docker Containers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="DB.html">Database</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="devices.html">devices table</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="device_types.html">device_types table</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="rooms.html">rooms table</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="buildings.html">buildings table</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="room_configurations.html">room_configurations table</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="DemoDBScript.html">Demo Couch Documents</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="roles.html">Device Roles</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="API.html">AV API Testing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="APIBody.html">API Body &amp; Response</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="UI.html">Using the UI</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="byuArchitecture.html">Exploring BYU&#8217;s Implementation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="FAQ.html">Frequently Asked Questions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../drivers/drivers.html">Drivers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../drivers/drivers.html#_writing_a_driver">Writing a Driver</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../drivers/drivers.html#_creating_a_driver_server">Creating a Driver Server</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../deployment/aws.html">Deploy to AWS</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">AV Control API</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">AV Control API</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Hardware</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../hardware/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Lazarette</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lazarette/index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">AV Control API</a></li>
    <li><a href="quickstart.html">Quick Start</a></li>
    <li><a href="DB.html">Database</a></li>
    <li><a href="DemoDBScript.html">Demo Couch Documents</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/byuoitav/av-control-api/edit/master/docs/modules/quickstart/pages/DemoDBScript.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Demo DB Files</h1>
<div class="paragraph">
<p><strong><em>Before running this script you first need to create an admin account for your couch DB.</em></strong> Please follow the steps below to get it set up:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You can access the DB management utility for your instance of the Couch DB by going to <code>http://localhost:5984/_utils</code> in a browser on your Pi, or by visiting <code>http://[pi-ip-address]:5984/_utils</code> from a browser on a computer connected to the same network as the Pi.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Launching the Chromium browser from the Pi is easy.  Just type <code>alt-d</code> to open the i3 dmenu.  From there just type in <code>chromium-browser</code> and hit enter.  For more i3 tips, please refer to their <a href="https://i3wm.org/docs/userguide.htm">documentation page.</a>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>The database currently does not have an admin user, so you will automatically be "logged" into the tool.</p>
</li>
<li>
<p>Click the user icon on the bottom of the menu on the left side of the screen (please see screenshot below).</p>
</li>
<li>
<p>Add a new admin user with the username "admin" and the password "AVAPIPASSWORD".</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>These are the username and password used when running the following script to load the DB.  It is also the username and password used by the AV-API code to access the configurations.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Couch.jpg" alt="Couch DB">
</div>
</div>
<div class="paragraph">
<p>With the admin user created, you are now ready to create the DB entries needed for this demo. We have simplified this process with a script that will download the necesarry JSON files and upload them to your instance of Couch DB.  After the database entries are in place, you will need to change just a few settings to customize the setup for your specific network and setup.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download the Couch_Demo_Set_Up_Script from the <a href="https://github.com/byuoitav/DemoCouchDBSetup">Couch_Demo_Set_Up_Script</a> repository in github to the Pi.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>From the Raspberry Pi you can simply run</p>
<div class="paragraph">
<p><code>wget https://raw.githubusercontent.com/byuoitav/DemoCouchDBSetup/master/Couch_Demo_Set_Up_Script.py</code></p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>To execute the script, run the following command on the Pi:</p>
<div class="paragraph">
<p><code>python3 Couch_Demo_Set_Up_Script.py admin AVAPIPASSWORD</code></p>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The username and password for the admin DB are passed into this script as arguments.  If you choose to change the password for your database admin user, you MUST also update the <a href="startAPI.html" class="page">docker-compose.yml</a> file you created earlier.  Look for the Couch DB username and password settings in the AV-API section of that document.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>After running this script you can validate that it worked by once again logging into the DB managment utility for your instance of Couch DB and looking for the new documents.</p>
</div>
<div class="paragraph">
<p>While in the DB management utility, please make the following changes:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the "devices" database, the following changes are needed:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>open the DEMO-123-CP1 document and update the address attribute to the IP address of your Raspberry Pi.</p>
</li>
<li>
<p>open the DEMO-123-D1 document and update the address attribute to the IP address of your flatpanel TV</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong><em>Congratulations, at this point the code is up and running and your room is configured.  You should be ready move on to the testing sections (<a href="API.html" class="page">Testing the API</a> and <a href="UI.html" class="page">Demo UI</a>)</em></strong></p>
</div>
<div class="paragraph">
<p>Feel free to explore the contents of the documents created in your Couch DB.  For an in depth discussion of the documents, please visit the <a href="DemoDBTables.html" class="page">Demo DB Tables</a> page of this guide.</p>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>Copyright (C) 2019-2020 <a href="https://byu.edu">Brigham Young University</a>.</p>
  <p>Except where otherwise noted, docs.av.byu.edu are licensed under the <a href="https://www.mozilla.org/en-US/MPL/2.0/">Apache Version 2.0</a></p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
